sy      = -matrix[2];
cy      = Math.sqrt(1 - sy*sy);
angle_y = Math.atan2(sy, cy);


if (Quaternion.EPSILON < Math.abs(cy))          // no gimbal lock?
// Return the value of this vector / f.  We do this by multiplying the recip.
if(f == 0)
f = 1;

f = 1/f;

return new Matrix4f(matrix[0]  * f, matrix[1]  * f, matrix[2]  * f, matrix[3]  * f,

