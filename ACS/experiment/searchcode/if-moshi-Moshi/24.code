public JsonAdapter<?> create(Type type, Set<? extends Annotation> annotations, Moshi moshi) {
if (type instanceof ParameterizedType &amp;&amp; Optional.class == ((ParameterizedType) type).getRawType()) {
if (value.isPresent()) {
if (adapter == null) {
adapter = moshi.adapter(type);

