final int nbPeriods = periods.size();
if (longTermEmaNbPeriods > nbPeriods) {
throw new IllegalArgumentException(&quot;Not enough periods&quot;);
}
if (shortTermEmaNbPeriods > longTermEmaNbPeriods) {

