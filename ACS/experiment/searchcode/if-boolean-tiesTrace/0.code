* @param data array to be ranked
* @return array of ranks
* @throws NotANumberException if the selected {@link NaNStrategy} is {@code FAILED}
// tie sequence has ended (or had length 1)
pos = i + 1;
if (tiesTrace.size() > 1) {  // if seq is nontrivial, resolve

