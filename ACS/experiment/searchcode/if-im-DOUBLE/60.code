double absX = Math.abs(re);
double absY = Math.abs(im);
if (absX == 0.0 &amp;&amp; absY == 0.0) {
return 0.0;
} else if (absX >= absY) {
double d = im / re;
return absX * Math.sqrt(1.0 + d * d);

