for (final PathSegment segment : segments) {
sb.append(segment.toString());

if (segment != Iterables.getLast(segments)) {
final PathSegment parsedSegment = PathSegment.fromString(seg);
if (!PathSegment.EMPTY.equals(parsedSegment))

