int imax = -1;
for (int i=0; i<data.length; i++) {
if (Double.isNaN(data[i])) continue;
if (Double.isNaN(max)|| data[i] > max) {
max = data[i];

