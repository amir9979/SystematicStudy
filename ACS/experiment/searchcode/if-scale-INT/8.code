public int getPitch(int[] scale, int scaleBase, int direction) {
if (prevPitch != null &amp;&amp; (prevPitch <= minPitch &amp;&amp; direction < 0 ||
return prevPitch;
}
int pitch;
int scaleOffset;
if (prevPitch == null) {

