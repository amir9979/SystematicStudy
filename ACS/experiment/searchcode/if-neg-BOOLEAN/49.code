double ret = 1, d = x;
boolean neg = false;
if (n < 0){
n = - n;
neg = true;
if (n % 2 == 1) ret = ret * d;
n = n >> 1;
d = d * d;
}
if (neg) return 1/ret;
else return ret;
}
}

