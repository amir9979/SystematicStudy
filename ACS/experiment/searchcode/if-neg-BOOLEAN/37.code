if (n == -1) return 1 / x;

boolean neg = n < 0;
if (neg) n = -n;

double p = pow(x, n / 2);
double prod;
prod = p * p * x;
}

if (neg) {
return 1 / prod;
} else {
return prod;
}
}
}

