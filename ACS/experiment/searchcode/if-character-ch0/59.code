char ch0 = Character.forDigit((ba[j] >> 4) &amp; 0xF, 16);

if (Character.isLetter(ch0)) {
ch0 -= caseDiff;
}
sb.append(ch0);
ch0 = Character.forDigit(ba[j] &amp; 0xF, 16);
if (Character.isLetter(ch0)) {
ch0 -= caseDiff;

