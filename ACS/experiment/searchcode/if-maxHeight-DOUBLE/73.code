int targetWidth, targetHeight;
double aspectRatio;

if (source.getWidth() > source.getHeight()) {
targetWidth = maxWidth;
targetHeight = maxHeight;
aspectRatio = (double) source.getWidth() / (double) source.getHeight();

