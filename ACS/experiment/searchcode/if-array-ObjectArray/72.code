Object[] objectArray = (Object[]) array;

if (objectArray.length == 0) {
return array;
}

Object firstElement = objectArray[0];
if (firstElement == null) {
return array;

