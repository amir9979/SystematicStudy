public static double[] softmax(double[] x, int n) {

double[] y = new double[n];
double max = 0.;
double sum = 0.;

for (int i = 0; i < n; i++) {
if (max < x[i]) {
max = x[i];  // to prevent overflow

