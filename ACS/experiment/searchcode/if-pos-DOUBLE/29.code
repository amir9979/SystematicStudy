double previousVal = 0;
double previousPos = -1;

double nextVal = 0;
double nextPos = Double.MAX_VALUE;

for (Double ctrlPos : controlPoints.keySet()) {
double ctrlVal = controlPoints.get(ctrlPos);

