nanPositions = getNanPositions(ranks);
if (nanPositions.size() > 0) {
throw new NotANumberException();
private void restoreNaNs(double[] ranks, List<Integer> nanPositions) {
if (nanPositions.size() == 0) {
return;

