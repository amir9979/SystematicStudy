for (int idx1 = a.length - 2; idx1 >= 0; --idx1) {
if (a[idx1].compareTo(a[idx1 + 1]) < 0) {
for (int idx1 = a.length - 2; idx1 >= 0; --idx1) {
if (a[idx1] < a[idx1 + 1]) {
int idx2 = upperBound(a, idx1 + 1, a.length, a[idx1]);

