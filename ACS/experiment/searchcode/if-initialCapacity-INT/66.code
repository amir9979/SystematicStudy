// Find the best power of two to hold elements.
// Tests &quot;<=&quot; because arrays aren&#39;t kept full.
if (numElements >= initialCapacity) {
initialCapacity |= (initialCapacity >>> 16);
initialCapacity++;

if (initialCapacity < 0) // Too many elements, must back off

