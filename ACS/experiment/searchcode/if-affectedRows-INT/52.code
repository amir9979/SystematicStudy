PreparedStatement pst = connection.prepareStatement(query.toString(), PreparedStatement.RETURN_GENERATED_KEYS);
ResultSet rs = null;
int autoGeneratedKey = -1;
int affectedRows = -1;
rs = pst.getGeneratedKeys();

if (rs.next()) {
autoGeneratedKey = rs.getInt(1);
}

rs.close();

query.setAffectedRows(affectedRows);

