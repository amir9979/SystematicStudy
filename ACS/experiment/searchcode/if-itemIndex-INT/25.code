// fill up to the ground
int ground = fillTowardsGroundFrom0(itemIndex);

// if ground not reached, shift cells to the ground
shiftCellsTowardsGround(ground, itemIndex, gapBefore);
}

// fill up to the sky
int sky = fillTowardsSkyFrom0(itemIndex);

// if sky not reached, add more cells under the ground and then shift

