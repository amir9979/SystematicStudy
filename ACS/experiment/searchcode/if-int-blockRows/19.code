int tileWidth = (width / 8);
int rowCount = tileCount / tileWidth;
if (tileCount % tileWidth != 0)
int by = y / 8;

int offs = bx + by * (width / 8) - tileOffset;
if (offs < 0)
return 0;

