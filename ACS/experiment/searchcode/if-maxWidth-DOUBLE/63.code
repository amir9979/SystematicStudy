double aspect = (double) width / (double) height;
double desiredAspect = (double) maxWidth / (double) maxHeight;

if (aspect > desiredAspect) {
if (width > maxWidth) {
setImage(getImage().getScaledInstance(maxWidth, -1,

