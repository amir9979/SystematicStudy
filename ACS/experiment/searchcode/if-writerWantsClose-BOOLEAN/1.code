/** True after {@link IOException}. {@link #close(int, String)} becomes only valid call. */
private boolean writerWantsClose;
if (writerSentClose) throw new IllegalStateException(&quot;closed&quot;);
if (writerWantsClose) throw new IllegalStateException(&quot;must call close()&quot;);

