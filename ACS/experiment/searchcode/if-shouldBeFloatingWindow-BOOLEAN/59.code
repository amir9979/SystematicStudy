boolean shouldBeFloatingWindow = shouldBeFloatingWindow();
if (shouldBeFloatingWindow) {
getWindow().setAttributes(params);
}

private boolean shouldBeFloatingWindow() {
Resources.Theme theme = getTheme();

