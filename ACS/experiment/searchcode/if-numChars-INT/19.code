numchars = in.read( cbuf, off, len );

if ( numchars == -1 ) // EOF?
return -1;

int last = off;

for ( int i = off; i < off + numchars; i++ )
{
if ( ! intag )

