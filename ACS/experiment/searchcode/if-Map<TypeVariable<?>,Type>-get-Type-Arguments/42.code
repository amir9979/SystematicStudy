Reference<Map<TypeVariable<?>, Type>> ref = typeVariableCache.get(targetType);
Map<TypeVariable<?>, Type> map = ref != null ? ref.get() : null;

if (map == null) {
Map<TypeVariable<?>, Type> typeVariableMap) {
if (type.getRawType() instanceof Class) {
TypeVariable<?>[] typeVariables = ((Class<?>) type.getRawType()).getTypeParameters();

