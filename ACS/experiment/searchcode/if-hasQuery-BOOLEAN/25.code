int startQuery = location.indexOf(&#39;?&#39;);
int startAnchor = location.indexOf(&#39;#&#39;);
boolean hasQuery = startQuery > 0;
boolean hasAnchor = startAnchor > 0;

final URIBuilder builder;

if (hasQuery) {

