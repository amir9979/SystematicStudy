private static int BUFFERSIZE = 16384;

// if bufferend < bufferstart, we&#39;ve wrapped around
private byte[] buffer=new byte[BUFFERSIZE];
private int bufferstart = 0;
private int bufferend = 0;
private int size = 0;

