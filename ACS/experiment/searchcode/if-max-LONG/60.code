int candidate = (min+max)/2;
if (candidate * candidate > x)
max = candidate-1;
while (min+1<max){
long mid=(min+max)/2;
if (mid*mid>x)
max=mid-1;

