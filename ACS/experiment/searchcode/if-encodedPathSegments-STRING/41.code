result.append(effectivePort);
}

pathSegmentsToString(result, encodedPathSegments);

if (encodedQueryNamesAndValues != null) {
// Make sure the path ends with a &#39;/&#39; by either adding an empty string or clearing a segment.
if (removed.isEmpty() &amp;&amp; !encodedPathSegments.isEmpty()) {

