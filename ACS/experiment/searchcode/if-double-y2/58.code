double AvB = x2 * y3 - x3 * y2;
double AvC = x2 * y4 - x4 * y2;

// online
if (AvB == 0 &amp;&amp; AvC == 0) {
px -= x1; // P = (px, py)
py -= y1;
double dist;
if (px * x2 + py * y2 <= 0.0) { // P*A

