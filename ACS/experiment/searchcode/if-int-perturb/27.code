ny /= scale;

int a = rgb &amp; 0xff000000;
if (colormap != null) {
//			float f = Noise.turbulence2(nx, ny, turbulence);
blu = (0.25f*brownLayer + 0.35f*greenLayer)*2.0f*grn;
grn *= Math.max(brownLayer, greenLayer) * grnPerturb;
int r = (rgb >> 16) &amp; 0xff;

