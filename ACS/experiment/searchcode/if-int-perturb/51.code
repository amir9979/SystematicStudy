ny /= scale;

int a = rgb &amp; 0xff000000;
if (colormap != null) {
//			float f = Noise.turbulence2(nx, ny, turbulence);
grn *= Math.max(brownLayer, greenLayer) * grnPerturb;
int r = (rgb >> 16) &amp; 0xff;
int g = (rgb >> 8) &amp; 0xff;
int b = rgb &amp; 0xff;

