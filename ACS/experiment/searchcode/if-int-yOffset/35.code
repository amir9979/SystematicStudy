if (y >= 1 &amp;&amp; y + treeHeight + 1 <= worldHeight)
{
int xOffset;
int yOffset;
int zOffset;

block = world.getBlock(x, y - 1, z);

if ((block.canSustainPlant(world, x, y - 1, z, ForgeDirection.UP,
for (yOffset = y; yOffset <= y + 1 + treeHeight; ++yOffset)
{
byte radius;

if (yOffset >= y + 1 + treeHeight - 2)
{
radius = 2;

